<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="" class="entry-summary">
	<meta name="author" content="">
	<!-- <link rel="stylesheet" type="text/css" media="print" href="print.css" /> -->
	<title>Fattura</title>

	<style type="text/css" media="all">
	 @font-face {
	     font-family: themeFont;
	     src: url("fonts/Oswald-Light.ttf");
	 }
	 @media print {
	     pre, blockquote {page-break-inside: avoid;}
	 }
	 html{
	     background: url("img/SfondoKotobaAlpha.png") repeat-y center center fixed;
	     /* -webkit-background-size: cover;
		-moz-background-size: cover;
		-o-background-size: cover;
		background-size: cover; */
	 }
	 body{
	     font-family: themeFont;
	     margin: 0;
	     padding: 0;
	 }
	 div.header{
	     /* background:#ffffff; */
	     /* height:30px; */
	     width:100%;
	     /* position:fixed; */
	     display:inline-block;
	     margin-top:0px;
	     top:0px;
	     margin-right:0;
	     color:#00000099;
	     font-size:16px;
	     z-index:999;
	     text-align: left;
	     /* opacity:0.5; */
	     vertical-align: top;
	 }
	 div.headerR{
	     background:#ffffff;
	     height:30px;
	     width:350px;
	     /* position:fixed; */
	     display:inline-block;
	     margin-top:0px;
	     margin-right:0px;
	     margin-bottom:20px;
	     top:0px;
	     font-size:25px;
	     z-index:999;
	     text-align: left;
	     opacity:0.9;
	     float:right;
	     right:0px;
	 }
	 div.itTax{
	     /* height:30px;
		width:350px; */
	     /* position:fixed; */
	     font-size:12px;
	     display:inline-block;
	     margin-top:0px;
	     margin-right:0px;
	     margin-bottom:20px;
	     bottom:20px;
	     text-align: left;
	     opacity:0.9;
	     float:left;
	     left:0px;
	 }
	 div.footer{
	     background:#ffffff;
	     height:30px;
	     width:100%;
	     position:fixed;
	     display:inline-block;
	     margin-bottom:0px;
	     bottom:0px;
	     margin-right:auto;
	     margin-left:auto;
	     color:#000000;
	     font-size:14px;
	     z-index:999;
	     text-align: left;
	 }
	 div.itTot{
	     margin:auto auto auto auto;
	     page-break-inside:auto;
	     margin-top:160px;
	     margin-bottom:250px;
	     overflow-x:auto;
	     border-spacing: 2.5rem;
	     border-collapse: collapse;
	     font-size: 24px;
	     width: 80%;
	     position:relative;
	     /* table-layout: fixed; */
	 }
	 .itTot > table {
	     font-size: 24px;
	     border-spacing: 2.5rem;
	     border: 1px solid black;
	     width: 100%;
	 }
	 .itTot > table > tbody > tr:nth-child(2) {
	     border-style:solid;
	     border-width: 4px 0px 1px 1px;
	 }
	 table.itTot > thead{
	     background-color:#555575aa;
	     color:#fff;
	     padding: 15px;
	 }
	 table.itTot > thead > tr, td {
	     height: 50px;
	     text-align: center;
	     vertical-align: bottom;
	     padding: 15px;
	 }
	 div.itTab > table > thead > tr, td {
	     height: 50px;
	     text-align: left;
	     vertical-align: top;
	     padding: 4px;
	 }
	 div.itTab{
	     /* margin:auto auto auto auto; */
	     page-break-inside:auto;
	     margin-top:40px;
	     overflow-x:auto;
	     border-spacing: 0.5rem;
	     border-collapse: collapse;
	     font-size: 14px;
	     /* margin: 45px; */
	     /* text-align: left; */
	     width: 680px;
	     position:relative;
	     /* table-layout: fixed; */
	 }
	 span.subsect{
	     margin-top:40px;
	     font-size: 26px;
	 }
	 table{
	     /* margin:auto auto auto auto; */
	     page-break-inside:auto;
	     overflow-x:auto;
	     border-spacing: 0.5rem;
	     border-collapse: collapse;
	     /* margin: 45px; */
	     /* text-align: left; */
	     position:relative;
	     /* table-layout: fixed; */
	 }
	 .tableIt{
	     margin:auto auto auto auto;
	     overflow-y:scroll;
	     max-height:300px;
	     height:300px;
	     width:90%;
	     border:2px;
	     border-color:#000000;
	     border-spacing: 0.5rem;
	     border-collapse: collapse;
	     display:inline-block;
	 }
	 tbody {
	     /* display: block; */
	 }
	 tfoot{
	     display:table-footer-group;
	 }
	 thead {
	     display:table-header-group;
	     /* display: block; */
	     /* position: absolute; */
	     /* display:inline; */
	 }
	 tr{
	     border-bottom: 1px solid #ccc;
	     page-break-inside:avoid; page-break-after:auto;
	 }
	 tr:last-child {
	     border: none;
	 }
	 td{
	     /* padding:5px 10px 0px 0px; */
	 }
	 .custDet{
	     margin:auto auto auto auto;
	     display:inline-block;
	 }
	 .wrapper{
	     position:relative;
	     margin: 20px auto auto auto;
	     float:bottom;
	     width:50%;
	     display:table;
	     /* transform: translate(0%,10%); */
	 }
	 .detTab{
	     /* transform: translate(0%,10%); */
	     margin: auto auto 200px auto;
	 }
	 .send-to, .ship-to, .inv-det{
	     /* position:absolute; */
	     font-size:14px;
	     width:250px;
	     display:inline-block;
	     vertical-align:top;
	     /* float:top; */
	     margin: 0 auto;
	 }
	 ul{
	     /* list-style-image: url('sqpurple.gif'); */
	     list-style: none outside none;
	 }
	 li {
	     /* font: 200 20px/1.5 Helvetica, Verdana, sans-serif; */
	 }
	 li:last-child {
	     border: none;
	 }
	 li a {
	     text-decoration: none;
	     color: #000;
	     display: block;
	     width: 200px;	     
	     -webkit-transition: font-size 0.3s ease, background-color 0.3s ease;
	     -moz-transition: font-size 0.3s ease, background-color 0.3s ease;
	     -o-transition: font-size 0.3s ease, background-color 0.3s ease;
	     -ms-transition: font-size 0.3s ease, background-color 0.3s ease;
	     transition: font-size 0.3s ease, background-color 0.3s ease;
	 }
	 li a:hover {
	     background: #f6f6f6;
	 }
	</style>
    </head>
    <body class="printable comments-exist" itemscope itemtype="http://schema.org/Article">
	<div class="headerR">
	    <ul><li>Data science on latency forecast</li></ul>
	</div>
	<div class="header">
	    <ul><li>Giovanni Marelli <li></li> Via Renzano, 36 - 25087 Salò (BS) </li><li>marelli@inventati.org - dauvi.org</li><li> VAT Nr: IT03668250982  </li><li>IBAN: IT35D0511655180000000024893</li></ul>
	</div>
	<div class="wrapper">
	    <div class="custDet">
		<div class="send-to">
		    <b>Bill to:</b>
		    <ul><li>Ree Technology GmbH</li>
			<li>c/o The Drivery</li>
			<li>Mariendorfer Damm 1</li>
			<li>12099 Berlin</li>
			<li>Register Number: HRB 200064 B</li>
			<li>VAT: DE320726195 </li>
		    </ul>
		</div>
		<!-- <div class="ship-to">
		     <b>Consegna a:</b>
		     <ul><li>RubberDuck srl.</li>
		     <li>Via Vittoria Colonna 50</li>
		     <li>20149 Milano</li>
		     <li>P.Iva IT07301490962</li>
		     </ul>
		     </div> -->
		<div class="inv-det">
		    <b>Details:</b>
		    <ul><li>invoice #: <span id="invoice_id">1-03</span></li>
			<li>issued: 2020/09/14</li>
			<li>due: </li>
		    </ul>
		</div>
	    </div><!-- custDet -->
	    <div class="detTab">
		<div id="itTot" class="itTot"></div>
		<span class="subsect"><b> Detail: </b></span>
		<div id="itTab" class="itTab"></div>
	    </div>
	    
	</div>
	<div class="footer"><i>Invoice: Data science on latency forecast</i></div>
	<div class="itTax">
	    <li> The operation is exemption from VAT for the law 190 of 23rd December 2014 Art. 1 paragraph from 54 to 89 and the paragraph from 111 to 113 of the law n. 208/2015.</li>
	    <li> System of government flat rate attrib. The payment is not subjected to deduction account under the law 190 of the 23rd December 2014 Art.1 paragraph 67.</li>
	    <li class="itTax">Duty stamp applied on the original.</li>
	</div>
	<script src="js/modernizr-custom.js"></script>
	<script src="js/jquery-3.0.0.min.js"></script>
	<script src="js/jquery-migrate-1.4.1.min.js"></script>
	<script>
	 $(document).ready(function() {
	     $.ajax({
		 type: "GET",
		 url: "worked_hours.csv",
		 dataType: "text",
		 success: function(data) {processData(data);}
	     });
	 });
	 function parse_row(row){
	     var insideQuote = false,                                             
		 entries = [],                                                    
		 entry = [];
	     row.split('').forEach(function (character) {                         
		 if(character === '"') {
		     insideQuote = !insideQuote;                                      
		 } else {
		     if(character == "," && !insideQuote) {                           
			 entries.push(entry.join(''));                                  
			 entry = [];                                                    
		     } else {
			 entry.push(character);                                         
		     }                                                                
		 }                                                                  
	     });
	     entries.push(entry.join(''));                                        
	     return entries;                                                      
	 }
	 function processData(allText) {
	     var allTextLines = allText.split(/\r\n|\n/);
	     var n_row = allTextLines.length
	     var entries = parse_row(allTextLines[0]);
	     var header = entries;
	     var n_col = entries.length;
	     var lines = [];
	     var tabTxt = '<table nobr="true">';
	     var tabHead = '<thead><tr>';
	     var tabTot = 0;
	     var tabPr = 0;
	     var cw = "37";
	     for(var h in header){
		 tabHead += '<td>' + header[h] + '</td>';
	     }
	     tabHead += '</tr></thead>'
	     tabTxt += tabHead + '<tbody>';
	     for(var r=1;r<n_row-1;r++){
		 if( r%12 == 0){
//tabTxt += '</table><table margin-top="120px">' + tabHead
		 }
		 var row = {};
		 var entries = parse_row(allTextLines[r]);
		 cw = entries[3];
		 if(cw < '38'){continue;}
		 tabTxt += '<tr>'
		 for(var c=0;c<n_col;c++){
		     var field = entries[c].replace(/['"]+/g, '');
		     tabTxt += '<td>' + field + '</td>';
		     row[header[c]] = entries[c];
		 }
		 tabTxt += '</tr>'
		 tabTot += parseFloat(row['hours']);
		 lines.push(row);
	     }
	     tabPr = tabTot * 80.;
	     var txtTot = '<table nobr="true" class="itTot">';
	     txtTot += '<thead><tr><td>description</td><td>taxed</td><td>amount</td></tr></thead>';
	     var desc = "[Data science services: "+tabTot+" hours at 80€/hr]"
	     txtTot += '<tbody>'
	     txtTot += '<tr><td>'+desc+'</td><td>'+'x'+'</td><td>'+tabPr+'€</td></tr>'
	     txtTot += '<tr><td>'+'<b>Total</b>'+'</td><td>'+'x'+'</td><td><b>'+tabPr+'€</b></td></tr>'
	     txtTot += '</tbody>'
	     txtTot += '</table>'
	     tabTxt += '</tbody></table>';
	     $('#itTab').html(tabTxt);
	     $('#itTot').html(txtTot);
	     $('#invoice_id').text("20-" + cw);

	     
	     /* var lines = [];
		var record_num = entries.length;  // or however many elements there are in each row
		var headings = entries.splice(0,record_num);
		console.log(allTextLines);
		while (entries.length>0) {
		var tarr = [];
		for (var j=0; j<record_num; j++) {
		tarr.push(headings[j]+":"+entries.shift());
		}
		lines.push(tarr);
		}
		console.log(lines); */
	 }
	 
	</script>
    </body>
</html>
